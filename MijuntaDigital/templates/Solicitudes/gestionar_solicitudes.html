{% extends "base.html" %}
{% block title %}Gestión de Solicitudes{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="text-center text-primary fw-bold mb-4">
    <i class="fa-solid fa-clipboard-check me-2"></i> Gestión de Solicitudes Ciudadanas
  </h2>

  <form method="get" class="mb-4 d-flex justify-content-end">
    <input type="text" name="buscar" value="{{ query }}" class="form-control w-25 me-2" placeholder="Buscar...">
    <button type="submit" class="btn btn-outline-primary">Buscar</button>
  </form>

  {% if solicitudes %}
  <div class="table-responsive">
    <table class="table table-dark table-striped align-middle text-center">
      <thead class="table-secondary text-dark">
        <tr>
          <th>ID</th>
          <th>Vecino</th>
          <th>Tipo</th>
          <th>Estado</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for s in solicitudes %}
        <tr>
          <td>{{ s.id_solicitud }}</td>
          <td>{{ s.id_vecino.nombre }}</td>
          <td>{{ s.tipo }}</td>
          <td><span class="badge bg-{{ s.estado|lower }}">{{ s.estado }}</span></td>
          <td>{{ s.fecha_creacion|date:"d/m/Y" }}</td>
          <td>
            <a href="{% url 'detalle_solicitud' s.id_solicitud %}" class="btn btn-sm btn-outline-info">
              <i class="fa-solid fa-eye"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="alert alert-warning text-center mt-3">
    No hay solicitudes registradas.
  </div>
  {% endif %}
</div>
{% endblock %}
